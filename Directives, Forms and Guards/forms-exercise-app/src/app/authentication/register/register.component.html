<!-- {{model | json}} -->

 <div class="container">
  <h1>Registration Form</h1>
 
  <form #registrationForm="ngForm" (ngSubmit)="register()">
    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" class="form-control" id="username" 
      required name="username" pattern="^[A-Z][A-Za-z\d]+$" 
       [(ngModel)]="model.username" #username="ngModel"/>   
       <!-- <div  [hidden]="username.valid || username.pristine" class="alert alert-danger"> -->
          <div  *ngIf="username.touched && username.errors" class="alert alert-danger">
          Username must start with a capital letter and must contain only letters and digits.
       </div>   
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input  type="password" class="form-control" id="password" 
      required name="password" pattern="^[A-Za-z\d]{4,16}$" 
      [(ngModel)]="model.password" #password="ngModel" />  
      <div  [hidden]="password.valid || password.pristine" class="alert alert-danger">
          Password must contain only letters and digits and must be between 4 and 16 symbols.
           </div>     
    </div>
    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <input type="password" class="form-control" id="confirmPassword" 
      required name="confirmPassword" 
      [(ngModel)]="model.confirmPassword" #confirmPassword="ngModel"/>  
      <div  [hidden]="confirmPassword.pristine || password.value === confirmPassword.value" class="alert alert-danger">
          Both passwords must match.
           </div>     
    </div>
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input type="text" class="form-control" id="firstName" 
      required name="firstName" pattern="^[A-Z][a-z]+$"
      [(ngModel)]="model.firstName" #firstName="ngModel" />      
      <div  [hidden]="firstName.valid || firstName.pristine" class="alert alert-danger">
          First name must contain only letters and start with a capital letter.
      </div>  
    </div>
    <div class="form-group">
      <label for="lastName">Last Name</label>
      <input type="text" class="form-control" id="lastName" 
      required name="lastName" pattern="^[A-Z][a-z]+$"
      [(ngModel)]="model.lastName" #lastName="ngModel" />
      <div  [hidden]="lastName.valid || lastName.pristine" class="alert alert-danger">
          Last name must contain only letters and start with a capital letter.
      </div>
    </div>
    <div class="form-group">
      <label for="email">Email Address</label>
      <input type="text" class="form-control" id="email" 
      required name="email" email
      [(ngModel)]="model.email" #email="ngModel" />
      <div  [hidden]="email.valid || email.pristine" class="alert alert-danger">
          There are various email address patterns in the internet. Find one and use it.
      </div>
    </div>
    <div class="form-group">
      <label for="age">Age</label>
      <input type="number" class="form-control" id="age" 
       name="age" pattern="^(1[8-9]|[2-9][0-9]|100)$"
       [(ngModel)]="model.age" #age="ngModel"/>
       <div  [hidden]="age.valid || age.pristine" class="alert alert-danger">
          The age must be between 18 and 100 years.
        </div>
    </div>

    <button type="submit" [disabled]="registrationForm.form.invalid" class="btn btn-success">Register</button>
  </form>

  <div *ngIf="loginFailed"  class="alert alert-danger">
      {{errorMessage}}
  </div>

</div>
